{
    "collab_server" : "",
    "contents" : "\n#list_of_data<- list.files(\"data/sigma\", pattern=\"exp_K\") #new files that i turned off the remove lines\n#data_location<-\"data/sigma/\"\n\nmake_dichotomy <- function(list_of_data, data_location){\n  library(ggplot2)\n  library(gridExtra)\n  library(gtable)\n  library(plotrix)\n  library(viridis)\n  dichotomy<-data.frame(id= integer(length(list_of_data)), name = character(length(list_of_data)), v=integer(length(list_of_data)), h=integer(length(list_of_data)), sK=integer(length(list_of_data)), sC=integer(length(list_of_data)), d_mean = integer(length(list_of_data)), sd = integer(length(list_of_data)), se=integer(length(list_of_data)),stringsAsFactors=FALSE)\n  \n  for (i in 1:length(list_of_data)){\n    print(list_of_data[i])\n    if(i == 1){\n      #file=read.table(paste0(\"cut/tests/\",list_of_data[1]),header = TRUE)\n      file=read.table(paste0(data_location,list_of_data[1]),header = TRUE)\n      file$trial <- strtoi(strsplit(unlist(strsplit(list_of_data[1], \"trial_\"))[2], \".txt\"))\n      file$id<- i\n      file$name<-list_of_data[1]\n      file$v<-as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[i], \"trial_\"))[1], \"_\"))[3])\n      file$h<- as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[i], \"trial_\"))[1], \"_\"))[5])\n      file$sK<-as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[i], \"trial_\"))[1], \"_\"))[8])\n      file$sC<-as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[i], \"trial_\"))[1], \"_\"))[11])\n      \n      file$dif_pheno <- file$pheno_p - file$pheno_h\n      \n      dichotomy$id[1] <- i\n      dichotomy$name[1]<-list_of_data[1]\n      dichotomy$v[1]<-as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[1], \"trial_\"))[1], \"_\"))[3])\n      dichotomy$h[1]<- as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[1], \"trial_\"))[1], \"_\"))[5])\n      dichotomy$sK[1]<-as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[1], \"trial_\"))[1], \"_\"))[8])\n      dichotomy$sC[1]<-as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[1], \"trial_\"))[1], \"_\"))[11])\n      file$dich = NA\n      last_0 = 1\n      close = 0\n      \n      for(j in 1:nrow(file)){\n        \n        if (abs(file$dif_pheno[j]) <= 2*file$sig_K[1]){\n          close = 1 + close\n          if (abs(file$dif_pheno[j]) == 0){\n            file$dich[j] = file$gen[j] - last_0\n            last_0 = file$gen[j]\n          } \n        }\n      }\n      dichotomy$d_mean[1]=mean(file$dich,na.rm=TRUE)\n      dichotomy$sd[1]<-sd(file$dich,na.rm=TRUE)\n      dichotomy$se[1]<-std.error(file$dich, na.rm=TRUE)\n      dichotomy$close[1]<-close/nrow(file)\n    }\n    #tempfile <- read.table(paste0(\"cut/tests/\",list_of_data[i]), header = TRUE)\n    tempfile <- read.table(paste0(data_location,list_of_data[i]), header = TRUE)\n    tempfile$trial <- strtoi(strsplit(unlist(strsplit(list_of_data[i], \"trial_\"))[2], \".txt\"))\n    tempfile$id <- i\n    tempfile$name<-list_of_data[i]\n    tempfile$v<-as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[i], \"trial_\"))[1], \"_\"))[3])\n    tempfile$h<- as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[i], \"trial_\"))[1], \"_\"))[5])\n    tempfile$sK<-as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[i], \"trial_\"))[1], \"_\"))[8])\n    tempfile$sC<-as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[i], \"trial_\"))[1], \"_\"))[11])\n    \n    \n    dichotomy$id[i] <- i\n    dichotomy$name[i]<-list_of_data[i]\n    dichotomy$v[i]<-as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[i], \"trial_\"))[1], \"_\"))[3])\n    dichotomy$h[i]<- as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[i], \"trial_\"))[1], \"_\"))[5])\n    dichotomy$sK[i]<-as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[i], \"trial_\"))[1], \"_\"))[8])\n    dichotomy$sC[i]<-as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[i], \"trial_\"))[1], \"_\"))[11])\n    \n    tempfile$dif_pheno <- tempfile$pheno_p - tempfile$pheno_h\n    tempfile$dich = NA\n    last_0 = 1\n    close = 0\n    for(j in 1:nrow(tempfile)){\n      if (abs(tempfile$dif_pheno[j]) <= 2*tempfile$sig_K[1]){\n        close = 1 + close\n        if (abs(tempfile$dif_pheno[j]) == 0){\n          tempfile$dich[j] = tempfile$gen[j] - last_0\n          last_0 = tempfile$gen[j]\n        } \n      }\n    }\n    dichotomy$d_mean[i]=mean(tempfile$dich, na.rm=TRUE)\n    dichotomy$sd[i]<-sd(tempfile$dich, na.rm=TRUE)\n    dichotomy$se[i]<-std.error(tempfile$dich, na.rm=TRUE)\n    dichotomy$close[i]<-close/nrow(tempfile)\n    file<-rbind(file,tempfile)\n  }\n  \n  file$dif_pheno <- file$pheno_p - file$pheno_h\n  \n  dichotomy<-dichotomy[order(dichotomy$h),]\n  dichotomy$idh<-c(1:nrow(dichotomy))\n  \n  return(list(file, dichotomy))\n}\n\n#example\n#list_of_data<- list.files(\"data/2d_size\", pattern=\"exp\") #new files that i turned off the remove lines\n#data_location<-\"data/2d_size/\"\n\nmake_2d_dichotomy <- function(list_of_data, data_location){\n  library(ggplot2)\n  library(gridExtra)\n  library(gtable)\n  library(plotrix)\n  library(viridis)\n  dichotomy_2d<-data.frame(id= integer(length(list_of_data)), name = character(length(list_of_data)), v=integer(length(list_of_data)), h=integer(length(list_of_data)), sK=integer(length(list_of_data)), sC=integer(length(list_of_data)), d_mean = integer(length(list_of_data)), sd = integer(length(list_of_data)), se=integer(length(list_of_data)),stringsAsFactors=FALSE)\n  \n  for (i in 1:length(list_of_data)){\n    print(list_of_data[i])\n    if(i == 1){\n      #file=read.table(paste0(\"cut/tests/\",list_of_data[1]),header = TRUE)\n      file_2d=read.table(paste0(data_location,list_of_data[1]),header = TRUE)\n      file_2d$trial <- strtoi(strsplit(unlist(strsplit(list_of_data[1], \"trial_\"))[2], \".txt\"))\n      file_2d$id<- i\n      file_2d$name<-list_of_data[1]\n      file_2d$v<-as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[1], \"trial_\"))[1], \"_\"))[4])\n      file_2d$h<- as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[1], \"trial_\"))[1], \"_\"))[6])\n      file_2d$sK<-as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[1], \"trial_\"))[1], \"_\"))[9])\n      file_2d$sC<-as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[1], \"trial_\"))[1], \"_\"))[12])\n      \n      #file_2d$dif_pheno <- file_2d$pheno_p - file_2d$pheno_h\n      \n      dichotomy_2d$id[1] <- i\n      dichotomy_2d$name[1]<-list_of_data[1]\n      dichotomy_2d$v[1]<-as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[1], \"trial_\"))[1], \"_\"))[4])\n      dichotomy_2d$h[1]<- as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[1], \"trial_\"))[1], \"_\"))[6])\n      dichotomy_2d$sK[1]<-as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[1], \"trial_\"))[1], \"_\"))[9])\n      dichotomy_2d$sC[1]<-as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[1], \"trial_\"))[1], \"_\"))[12])\n      \n      file_2d$dich = NA\n      last_0 = 1\n      close = 0\n      lessclose = 0\n      for(j in 1:nrow(file_2d)){\n        if (file_2d$eud[j] > -5 && file_2d$eud[j] < 5){\n          file_2d$dich[j] = file_2d$gen[j] - last_0\n          last_0 = file_2d$gen[j]\n        }\n        if (abs(file_2d$eud[j]) < 2*file_2d$sig_K[1]){\n          close = 1 + close\n        }\n        if (abs(file_2d$eud[j]) < 4*file_2d$sig_K[1]){\n          lessclose = 1 + lessclose\n        }\n        \n      }\n      dichotomy_2d$d_mean[1]=mean(file_2d$dich,na.rm=TRUE)\n      dichotomy_2d$sd[1]<-sd(file_2d$dich,na.rm=TRUE)\n      dichotomy_2d$se[1]<-std.error(file_2d$dich, na.rm=TRUE)\n      dichotomy_2d$close[1]<-close/nrow(file_2d)\n      dichotomy_2d$lessclose[1]<-lessclose/nrow(file_2d)\n    }\n    #tempfile <- read.table(paste0(\"cut/tests/\",list_of_data[i]), header = TRUE)\n    tempfile <- read.table(paste0(data_location,list_of_data[i]), header = TRUE)\n    tempfile$trial <- strtoi(strsplit(unlist(strsplit(list_of_data[i], \"trial_\"))[2], \".txt\"))\n    tempfile$id <- i\n    tempfile$name<-list_of_data[i]\n    tempfile$v<-as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[i], \"trial_\"))[1], \"_\"))[4])\n    tempfile$h<- as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[i], \"trial_\"))[1], \"_\"))[6])\n    tempfile$sK<-as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[i], \"trial_\"))[1], \"_\"))[9])\n    tempfile$sC<-as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[i], \"trial_\"))[1], \"_\"))[12])\n    \n    \n    dichotomy_2d$id[i] <- i\n    dichotomy_2d$name[i]<-list_of_data[i]\n    dichotomy_2d$v[i]<-as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[i], \"trial_\"))[1], \"_\"))[4])\n    dichotomy_2d$h[i]<- as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[i], \"trial_\"))[1], \"_\"))[6])\n    dichotomy_2d$sK[i]<-as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[i], \"trial_\"))[1], \"_\"))[9])\n    dichotomy_2d$sC[i]<-as.numeric(unlist(strsplit(unlist(strsplit(list_of_data[i], \"trial_\"))[1], \"_\"))[12])\n    \n    #tempfile$dif_pheno <- tempfile$pheno_p - tempfile$pheno_h\n    tempfile$dich = NA\n    last_0 = 1\n    close = 0 \n    lessclose = 0 \n    for(j in 1:nrow(tempfile)){\n      if (tempfile$eud[j] > -5 && tempfile$eud[j] < 5){\n        tempfile$dich[j] = tempfile$gen[j] - last_0\n        last_0 = tempfile$gen[j]\n      }\n      if (abs(tempfile$eud[j]) < 2*tempfile$sig_K[1]){\n        close = 1 + close\n      }\n      if (abs(tempfile$eud[j]) < 4*tempfile$sig_K[1]){\n        lessclose = 1 + lessclose\n      }\n    }\n    dichotomy_2d$d_mean[i]=mean(tempfile$dich, na.rm=TRUE)\n    dichotomy_2d$sd[i]<-sd(tempfile$dich, na.rm=TRUE)\n    dichotomy_2d$se[i]<-std.error(tempfile$dich, na.rm=TRUE)\n    dichotomy_2d$close[i]<-close/nrow(tempfile)\n    dichotomy_2d$lessclose[i]<-lessclose/nrow(tempfile)\n    file_2d<-rbind(file_2d,tempfile)\n  }\n  \n  # file_2d$dif_pheno <- file_2d$pheno_p - file_2d$pheno_h represented by the eud\n  file_2d$dif_pi <- file_2d$div_p - file_2d$div_h\n  \n  \n  dichotomy_2d<-dichotomy_2d[order(dichotomy_2d$h),] \n  dichotomy_2d$idh<-c(1:nrow(dichotomy_2d))\n  return(list(file_2d, dichotomy_2d))\n}\n\nsave_space <- function(file1, file2, data_location){\n  library(\"zip\")\n  \n  full_zip1<- paste0(data_location, file1,\".zip\")\n  full_csv1<- paste0(data_location, file1,\".csv\")\n  full_zip2<- paste0(data_location, file2,\".zip\")\n  full_csv2<- paste0(data_location, file2,\".csv\")\n  print(paste0(\"zip \", full_csv1))\n  zip::zipr(full_zip1, full_csv1 )\n  print(paste0(\"zip \", full_csv2))\n  zip::zipr(full_zip2, full_csv2 )\n  \n  if (file.exists(full_csv1) && file.exists(full_zip1)) {\n    #Delete file if it exists\n    file.remove(full_csv1)}\n  \n  if (file.exists(full_csv2) && file.exists(full_zip2)) {\n    #Delete file if it exists\n    file.remove(full_csv2)}}\n\n",
    "created" : 1595530704941.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "4|56|96|0|\n102|59|205|0|\n",
    "hash" : "2368279503",
    "id" : "AE3122DB",
    "lastKnownWriteTime" : 1595830371,
    "last_content_update" : 1596137231331,
    "path" : "~/Desktop/Coevo/R_script/make_dataframe.R",
    "project_path" : "R_script/make_dataframe.R",
    "properties" : {
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}